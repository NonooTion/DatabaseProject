# 后端开发

## 数据库设计

### 数据库E-R图设计

![](%E5%81%A5%E8%BA%AB%E6%88%BF%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.png)

### 关系模式设计

#### 1. 用户表（Users）

| 字段名     | 字段类型                           | 字段含义                       |
| ---------- | ---------------------------------- | ------------------------------ |
| user_id    | INT, PRIMARY                       | 用户ID，主键                   |
| username   | VARCHAR(255)                       | 用户名                         |
| password   | VARCHAR(255)                       | 密码（加密存储）               |
| email      | VARCHAR(255)                       | 邮箱地址                       |
| role       | ENUM('admin', 'coach', 'customer') | 用户角色（管理员、教练、客户） |
| created_at | DATETIME                           | 账户创建时间                   |

#### 2. 会员卡表（Memberships）

| 字段名          | 字段类型                            | 字段含义                   |
| --------------- | ----------------------------------- | -------------------------- |
| membership_id   | INT, PRIMARY                        | 会员卡ID，主键             |
| user_id         | INT, FOREIGN                        | 客户ID，外键关联Users表    |
| membership_type | VARCHAR(100)                        | 会员卡类型（如年卡、月卡） |
| start_date      | DATE                                | 会员卡开始日期             |
| end_date        | DATE                                | 会员卡结束日期             |
| status          | ENUM('active', 'paused', 'expired') | 卡状态（激活、暂停、过期） |

#### 3. 消费记录表（Transactions）

| 字段名           | 字段类型                                                     | 字段含义                |
| ---------------- | ------------------------------------------------------------ | ----------------------- |
| transaction_id   | INT, PRIMARY                                                 | 交易ID，主键            |
| user_id          | INT, FOREIGN                                                 | 客户ID，外键关联Users表 |
| transaction_type | ENUM('membership', 'group_class', 'private_coach', 'self_practice', 'other') | 交易类型                |
| amount           | DECIMAL(10,2)                                                | 交易金额                |
| transaction_date | DATETIME                                                     | 交易时间                |
| description      | TEXT                                                         | 交易描述                |

#### 4. 团课表（GroupClasses）

| 字段名     | 字段类型     | 字段含义                |
| ---------- | ------------ | ----------------------- |
| class_id   | INT, PRIMARY | 团课ID，主键            |
| class_name | VARCHAR(255) | 团课名称                |
| coach_id   | INT, FOREIGN | 教练ID，外键关联Users表 |
| date_time  | DATETIME     | 课程日期和时间          |
| duration   | TIME         | 课程时长                |

#### 5. 私教表（PrivateCoaches）

| 字段名          | 字段类型      | 字段含义                             |
| --------------- | ------------- | ------------------------------------ |
| coach_id        | INT, PRIMARY  | 教练ID，主键（也用于Users表）        |
| available_times | TEXT          | 空闲时间段，以某种格式存储（如JSON） |
| rate_per_hour   | DECIMAL(10,2) | 每小时费用                           |

#### 6. 自助练习区表（SelfPracticeAreas）

| 字段名      | 字段类型     | 字段含义           |
| ----------- | ------------ | ------------------ |
| area_id     | INT, PRIMARY | 自助练习区ID，主键 |
| area_name   | VARCHAR(255) | 自助练习区名称     |
| description | TEXT         | 自助练习区描述     |